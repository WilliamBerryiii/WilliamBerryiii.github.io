---
layout: post
title: A CI Migration Part III - Kiln, Jenkins & Web Hooks
date: '2014-02-10T21:58:00.000-08:00'
author: William Berry
tags:
- Kiln
- SCM
- Build Pipeline
- Mercurial
- Jenkins
- DevOps
- Web Hooks
modified_time: '2014-02-10T22:01:54.241-08:00'
thumbnail: http://1.bp.blogspot.com/-Ld73hmNt4KE/UrE7rPQARHI/AAAAAAAAAQI/hjjJxaFxV10/s72-c/SnipImage.JPG
blogger_id: tag:blogger.com,1999:blog-4707687462195457004.post-1864935213967930309
blogger_orig_url: http://www.lucidmotions.net/2014/02/a-ci-migration-part-iii-kiln-jenkins.html
---

For better or worse, the SCM I work with is Mercurial provided through Fogbugz' Kiln. &nbsp;Yeah I know it's not GitHub, but I was ignorant of that decision as it was being made so, yeah. &nbsp;Reviews, complaints, flamewars aside, working with it has not been bad and it has a reasonable feature set. &nbsp;Of note is the ability to program web hooks to fire on a push to a repository. <br /><br />Configuring web hooks in Kiln is super easy and covered well in their online help&nbsp;<a href="http://help.fogcreek.com/8111/web-hooks-integrating-kiln-with-other-services">here</a>. &nbsp;For our integration we will be using a custom web hook; in you admin panel select web hooks and a new hook for all repositories.<br /><br /><div class="separator" style="clear: both;"><a href="http://1.bp.blogspot.com/-Ld73hmNt4KE/UrE7rPQARHI/AAAAAAAAAQI/hjjJxaFxV10/s1600/SnipImage.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-Ld73hmNt4KE/UrE7rPQARHI/AAAAAAAAAQI/hjjJxaFxV10/s320/SnipImage.JPG" height="313" width="320" /></a></div><div class="separator" style="clear: both;"><br /></div>Once configured, Kiln will fire off a blob of JSON for a waiting web service to do something with. &nbsp;We will primarily be interested in the pusher data, the repository group and the repository in the web hook data, though there is a wealth of other potentially relevant data. &nbsp;We currently only use one master hook that listens for commits on all repository groups; primarily because the Jenkins Job Manager, covered in my <a href="http://www.lucidmotions.net/2013/12/a-ci-migration-part-ii-convention-over.html">second article on CI migrations</a>, filters an parses for relevant build related tasks.<br /><br />That said one should consider that there are endless possibilities for this information. &nbsp;Consider the things we could do with web hooks:<br /><br /><ol><li>Trigger feature branch builds (as discussed).</li><li>Keep a permanent log of commits by dev (regardless of feature branch destruction)</li><li>Trigger round robin code reviews - good to give team members exposure to new elements.</li><li>Send Chrome notification to dev to get up and walk around.</li><li>Put pusher in the waiting room for next foosball game.</li></ol><div>Point being that once you have the data starting to work for you, the enterprise comes alive. &nbsp;It is all about a loosely coupled, woven fabric of services and event streams working in a coordinated way to make everyone's life a little easier and more fun.&nbsp;</div>