---
layout: post
title: 'IIS getting in the way of a beautiful Jenkins and Artifactory Engagement '
date: '2014-01-08T22:03:00.001-08:00'
author: William Berry
tags:
- Artifactory
- NTLM
- Continuous Integration
- Jenkins
- DevOps
- Window's Authentication
- IIS
modified_time: '2014-01-08T22:03:29.435-08:00'
blogger_id: tag:blogger.com,1999:blog-4707687462195457004.post-8053727212155658560
blogger_orig_url: http://www.lucidmotions.net/2014/01/iis-getting-in-way-of-beautiful-jenkins.html
---

My Jenkins installation had turned into a bit of a saga lately. &nbsp;I have been interested in trying out <a href="http://www.jfrog.com/home/v_artifactory_opensource_overview">Artifactory</a> by JFrog to store not only our produced binaries; but, additionally to proxy external dependancies and provide a host for general software used across the enterprise.<br /><br />Most of the installation went pretty well, pulled a fresh JDK and JRE on the machine and ran the Installer.bat. &nbsp;With the service up and running, I added some detailed connection information to the Tomcat config so that the Artifactory install would not conflict with the Jenkins install; namely to have it listen on localhost and an alternate port.<br /><br />As with the Jenkins installation, I created a proxy site with a URL rewrite, added NTLM Windows authentication, and updated the engineer's GPO to include the new url 'artifactory.host.domain.com'. &nbsp;A few 'gpupdate /forces' and the new Artifactory site was up and running with auto-login.<br /><br />I created a repository for our main SaaS product and turned my focus to Jenkins.<br /><br />In Jenkins, I was able to quickly add the artifactory plugin and begin the process of wiring Jenkins to Artifactory. &nbsp;Unfortunately, I have slammed solidly into a brick wall with an issue.<br /><br />When I attempt to test the connection from Jenkins to Artifactory via the Jenkins plugin, I get an 'unauthorized' exception. &nbsp;Checking the service logs for Artifactory in IIS, I see requests arriving from Jenkins without any authentication information. &nbsp;I would expect that IIS would respond to the authentication challenge from the Artifactory site with the application pools identity and properly negotiate. &nbsp;In this case that is not happening. <br /><br />Since Jenkins and Artifactory are on the same host, I could reroute Jenkins to the localhost ip and bypass the NTLM authentication; but, then all my URLs for the links in Jenkins to Artifactory would have URLs that are inaccessible to human users.<br /><br />At this point I do not have a solution. &nbsp;So if anyone reading this wants to chime in with any ideas â€¦ feel free to tell me I am doing it all wrong in the comments.